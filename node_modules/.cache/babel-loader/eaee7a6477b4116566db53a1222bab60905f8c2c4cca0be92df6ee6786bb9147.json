{"ast":null,"code":"import React,{useState}from'react';import{useData}from'../context/DataContext';import{BarChart3,TrendingUp,DollarSign,ShoppingCart,Users,Package,Calendar,Award,Target,Activity}from'lucide-react';import{format,startOfMonth,endOfMonth,eachMonthOfInterval,subMonths}from'date-fns';import{ru}from'date-fns/locale';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StatCard=_ref=>{let{title,value,icon:Icon,color,change,changeType='percentage'}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{background:\"linear-gradient(135deg, \".concat(color,\"15 0%, \").concat(color,\"05 100%)\"),border:\"1px solid \".concat(color,\"20\")},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',fontSize:'14px',marginBottom:'8px'},children:title}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'32px',fontWeight:'bold',color:'#333',marginBottom:'8px'},children:typeof value==='number'&&title.includes('₽')?\"\".concat(value.toLocaleString('ru-RU'),\" \\u20BD\"):value.toLocaleString('ru-RU')}),change!==undefined&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'14px',color:change>0?'#28a745':change<0?'#dc3545':'#6c757d',display:'flex',alignItems:'center',gap:'4px'},children:[/*#__PURE__*/_jsx(TrendingUp,{size:14,style:{transform:change<0?'rotate(180deg)':'none'}}),change>0?'+':'',change,changeType==='percentage'?'%':'',\" \\u0437\\u0430 \\u043C\\u0435\\u0441\\u044F\\u0446\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px',borderRadius:'50%',backgroundColor:color+'20',color:color},children:/*#__PURE__*/_jsx(Icon,{size:28})})]})});};const ChartCard=_ref2=>{let{title,children}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{style:{marginBottom:'20px',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(BarChart3,{size:20}),title]}),children]});};const SimpleBarChart=_ref3=>{let{data,color='#007bff'}=_ref3;const maxValue=Math.max(...data.map(d=>d.value));return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'end',gap:'8px',height:'200px',padding:'20px 0'},children:data.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:\"\".concat(item.value/maxValue*150,\"px\"),backgroundColor:color,borderRadius:'4px 4px 0 0',marginBottom:'8px',display:'flex',alignItems:'flex-end',justifyContent:'center',color:'white',fontSize:'12px',fontWeight:'bold',padding:'4px'},children:item.value>0&&item.value.toLocaleString('ru-RU')}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#666',textAlign:'center',transform:'rotate(-45deg)',whiteSpace:'nowrap'},children:item.label})]},index))});};const TopProductsList=_ref4=>{let{products}=_ref4;return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'12px'},children:products.map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'16px',backgroundColor:'#f8f9fa',borderRadius:'8px',border:index===0?'2px solid #ffd700':'1px solid #e9ecef'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',borderRadius:'50%',backgroundColor:index===0?'#ffd700':'#007bff',color:'white',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'14px',fontWeight:'bold'},children:index===0?/*#__PURE__*/_jsx(Award,{size:16}):index+1}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:'600',marginBottom:'4px'},children:product.name}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:'#666'},children:[\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u043D\\u043E: \",product.soldQuantity,\" \\u0448\\u0442. \\u2022 \\u0412\\u044B\\u0440\\u0443\\u0447\\u043A\\u0430: \",(product.soldQuantity*product.price).toLocaleString('ru-RU'),\" \\u20BD\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsxs(\"p\",{style:{fontWeight:'600',color:'#28a745'},children:[product.price.toLocaleString('ru-RU'),\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:product.stock>10?'#28a745':'#ffc107'},children:[\"\\u041E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A: \",product.stock]})]})]},product.id))});};const OrderStatusChart=_ref5=>{let{ordersByStatus}=_ref5;const statusColors={'Новый':'#007bff','В обработке':'#ffc107','Доставляется':'#17a2b8','Выполнен':'#28a745','Отменен':'#dc3545'};const total=Object.values(ordersByStatus).reduce((sum,count)=>sum+count,0);return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'12px'},children:Object.entries(ordersByStatus).map(_ref6=>{let[status,count]=_ref6;const percentage=total>0?count/total*100:0;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{minWidth:'100px',fontSize:'14px'},children:status}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,height:'20px',backgroundColor:'#e9ecef',borderRadius:'10px',overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"\".concat(percentage,\"%\"),height:'100%',backgroundColor:statusColors[status]||'#6c757d',borderRadius:'10px',transition:'width 0.3s ease'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{minWidth:'60px',textAlign:'right',fontSize:'14px',fontWeight:'600'},children:[count,\" (\",Math.round(percentage),\"%)\"]})]},status);})});};const Analytics=()=>{var _monthlyRevenueData,_monthlyRevenueData2;const{analytics,orders,customers,products}=useData();const[timeRange,setTimeRange]=useState('6months');// Подготовка данных для графика выручки по месяцам\nconst getMonthlyRevenueData=()=>{const months=timeRange==='6months'?6:12;const endDate=new Date();const startDate=subMonths(endDate,months-1);const monthsArray=eachMonthOfInterval({start:startDate,end:endDate});return monthsArray.map(month=>{const monthKey=format(month,'yyyy-MM');const revenue=analytics.monthlyRevenue[monthKey]||0;return{label:format(month,'MMM yyyy',{locale:ru}),value:revenue};});};// Расчет изменений за месяц (примерные данные)\nconst calculateMonthlyChange=(current,previous)=>{if(previous===0)return current>0?100:0;return Math.round((current-previous)/previous*100);};const monthlyRevenueData=getMonthlyRevenueData();const currentMonthRevenue=((_monthlyRevenueData=monthlyRevenueData[monthlyRevenueData.length-1])===null||_monthlyRevenueData===void 0?void 0:_monthlyRevenueData.value)||0;const previousMonthRevenue=((_monthlyRevenueData2=monthlyRevenueData[monthlyRevenueData.length-2])===null||_monthlyRevenueData2===void 0?void 0:_monthlyRevenueData2.value)||0;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'30px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'28px',fontWeight:'bold',marginBottom:'8px'},children:\"\\u0410\\u043D\\u0430\\u043B\\u0438\\u0442\\u0438\\u043A\\u0430 \\u0438 \\u043E\\u0442\\u0447\\u0435\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666'},children:\"\\u0414\\u0435\\u0442\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(Calendar,{size:18}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:timeRange,onChange:e=>setTimeRange(e.target.value),style:{width:'auto'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"6months\",children:\"\\u041F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0435 6 \\u043C\\u0435\\u0441\\u044F\\u0446\\u0435\\u0432\"}),/*#__PURE__*/_jsx(\"option\",{value:\"12months\",children:\"\\u041F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0435 12 \\u043C\\u0435\\u0441\\u044F\\u0446\\u0435\\u0432\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-2\",style:{marginBottom:'30px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-2\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0432\\u044B\\u0440\\u0443\\u0447\\u043A\\u0430\",value:analytics.totalRevenue,icon:DollarSign,color:\"#28a745\",change:calculateMonthlyChange(currentMonthRevenue,previousMonthRevenue)}),/*#__PURE__*/_jsx(StatCard,{title:\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432\",value:analytics.totalOrders,icon:ShoppingCart,color:\"#007bff\",change:8}),/*#__PURE__*/_jsx(StatCard,{title:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0435 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u044B\",value:analytics.totalCustomers,icon:Users,color:\"#6f42c1\",change:15}),/*#__PURE__*/_jsx(StatCard,{title:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B \\u0432 \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\\u0435\",value:analytics.totalProducts,icon:Package,color:\"#fd7e14\",change:-2})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-2\",style:{marginBottom:'30px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-2\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"\\u0421\\u0440\\u0435\\u0434\\u043D\\u0438\\u0439 \\u0447\\u0435\\u043A\",value:Math.round(analytics.averageOrderValue),icon:Target,color:\"#17a2b8\",change:5}),/*#__PURE__*/_jsx(StatCard,{title:\"\\u041A\\u043E\\u043D\\u0432\\u0435\\u0440\\u0441\\u0438\\u044F\",value:\"\".concat(Math.round(analytics.totalOrders/analytics.totalCustomers*100),\"%\"),icon:Activity,color:\"#e83e8c\",change:3})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ChartCard,{title:\"\\u0412\\u044B\\u0440\\u0443\\u0447\\u043A\\u0430 \\u043F\\u043E \\u043C\\u0435\\u0441\\u044F\\u0446\\u0430\\u043C\",children:/*#__PURE__*/_jsx(SimpleBarChart,{data:monthlyRevenueData,color:\"#28a745\"})}),/*#__PURE__*/_jsx(ChartCard,{title:\"\\u0420\\u0430\\u0441\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432 \\u043F\\u043E \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\\u0430\\u043C\",children:/*#__PURE__*/_jsx(OrderStatusChart,{ordersByStatus:analytics.ordersByStatus})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ChartCard,{title:\"\\u0422\\u043E\\u043F-5 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432 \\u043F\\u043E \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0430\\u043C\",children:/*#__PURE__*/_jsx(TopProductsList,{products:analytics.topProducts})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'20px'},children:\"\\u041A\\u043B\\u044E\\u0447\\u0435\\u0432\\u044B\\u0435 \\u043F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0435\\u043B\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'16px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'12px',backgroundColor:'#f8f9fa',borderRadius:'6px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(DollarSign,{size:16,color:\"#28a745\"}),\"\\u0412\\u044B\\u0440\\u0443\\u0447\\u043A\\u0430 \\u0437\\u0430 \\u0442\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u043C\\u0435\\u0441\\u044F\\u0446:\"]}),/*#__PURE__*/_jsxs(\"strong\",{style:{color:'#28a745'},children:[currentMonthRevenue.toLocaleString('ru-RU'),\" \\u20BD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'12px',backgroundColor:'#f8f9fa',borderRadius:'6px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(ShoppingCart,{size:16,color:\"#007bff\"}),\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432 \\u0432 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0435:\"]}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'#007bff'},children:analytics.ordersByStatus['В обработке']||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'12px',backgroundColor:'#f8f9fa',borderRadius:'6px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Package,{size:16,color:\"#fd7e14\"}),\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432 \\u0437\\u0430\\u043A\\u0430\\u043D\\u0447\\u0438\\u0432\\u0430\\u0435\\u0442\\u0441\\u044F:\"]}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'#fd7e14'},children:products.filter(p=>p.stock<=5).length})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'12px',backgroundColor:'#f8f9fa',borderRadius:'6px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Users,{size:16,color:\"#6f42c1\"}),\"VIP \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u043E\\u0432:\"]}),/*#__PURE__*/_jsx(\"strong\",{style:{color:'#6f42c1'},children:customers.filter(c=>c.status==='VIP').length})]})]})]})]})]})]});};export default Analytics;","map":{"version":3,"names":["React","useState","useData","BarChart3","TrendingUp","DollarSign","ShoppingCart","Users","Package","Calendar","Award","Target","Activity","format","startOfMonth","endOfMonth","eachMonthOfInterval","subMonths","ru","jsx","_jsx","jsxs","_jsxs","StatCard","_ref","title","value","icon","Icon","color","change","changeType","className","style","background","concat","border","children","display","justifyContent","alignItems","fontSize","marginBottom","fontWeight","includes","toLocaleString","undefined","gap","size","transform","padding","borderRadius","backgroundColor","ChartCard","_ref2","SimpleBarChart","_ref3","data","maxValue","Math","max","map","d","height","item","index","flexDirection","flex","width","textAlign","whiteSpace","label","TopProductsList","_ref4","products","product","name","soldQuantity","price","stock","id","OrderStatusChart","_ref5","ordersByStatus","statusColors","total","Object","values","reduce","sum","count","entries","_ref6","status","percentage","minWidth","overflow","transition","round","Analytics","_monthlyRevenueData","_monthlyRevenueData2","analytics","orders","customers","timeRange","setTimeRange","getMonthlyRevenueData","months","endDate","Date","startDate","monthsArray","start","end","month","monthKey","revenue","monthlyRevenue","locale","calculateMonthlyChange","current","previous","monthlyRevenueData","currentMonthRevenue","length","previousMonthRevenue","onChange","e","target","totalRevenue","totalOrders","totalCustomers","totalProducts","averageOrderValue","topProducts","filter","p","c"],"sources":["D:/CRM/src/components/Analytics.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useData } from '../context/DataContext';\r\nimport { \r\n  BarChart3, \r\n  TrendingUp, \r\n  DollarSign, \r\n  ShoppingCart,\r\n  Users,\r\n  Package,\r\n  Calendar,\r\n  Award,\r\n  Target,\r\n  Activity\r\n} from 'lucide-react';\r\nimport { format, startOfMonth, endOfMonth, eachMonthOfInterval, subMonths } from 'date-fns';\r\nimport { ru } from 'date-fns/locale';\r\n\r\nconst StatCard = ({ title, value, icon: Icon, color, change, changeType = 'percentage' }) => (\r\n  <div className=\"card\" style={{ \r\n    background: `linear-gradient(135deg, ${color}15 0%, ${color}05 100%)`,\r\n    border: `1px solid ${color}20`\r\n  }}>\r\n    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n      <div>\r\n        <p style={{ color: '#666', fontSize: '14px', marginBottom: '8px' }}>{title}</p>\r\n        <p style={{ fontSize: '32px', fontWeight: 'bold', color: '#333', marginBottom: '8px' }}>\r\n          {typeof value === 'number' && title.includes('₽') \r\n            ? `${value.toLocaleString('ru-RU')} ₽`\r\n            : value.toLocaleString('ru-RU')\r\n          }\r\n        </p>\r\n        {change !== undefined && (\r\n          <p style={{ \r\n            fontSize: '14px', \r\n            color: change > 0 ? '#28a745' : change < 0 ? '#dc3545' : '#6c757d',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '4px'\r\n          }}>\r\n            <TrendingUp size={14} style={{ \r\n              transform: change < 0 ? 'rotate(180deg)' : 'none' \r\n            }} />\r\n            {change > 0 ? '+' : ''}{change}\r\n            {changeType === 'percentage' ? '%' : ''} за месяц\r\n          </p>\r\n        )}\r\n      </div>\r\n      <div style={{ \r\n        padding: '16px', \r\n        borderRadius: '50%', \r\n        backgroundColor: color + '20',\r\n        color: color\r\n      }}>\r\n        <Icon size={28} />\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst ChartCard = ({ title, children }) => (\r\n  <div className=\"card\">\r\n    <h3 style={{ marginBottom: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n      <BarChart3 size={20} />\r\n      {title}\r\n    </h3>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst SimpleBarChart = ({ data, color = '#007bff' }) => {\r\n  const maxValue = Math.max(...data.map(d => d.value));\r\n  \r\n  return (\r\n    <div style={{ display: 'flex', alignItems: 'end', gap: '8px', height: '200px', padding: '20px 0' }}>\r\n      {data.map((item, index) => (\r\n        <div key={index} style={{ \r\n          display: 'flex', \r\n          flexDirection: 'column', \r\n          alignItems: 'center',\r\n          flex: 1\r\n        }}>\r\n          <div style={{\r\n            width: '100%',\r\n            height: `${(item.value / maxValue) * 150}px`,\r\n            backgroundColor: color,\r\n            borderRadius: '4px 4px 0 0',\r\n            marginBottom: '8px',\r\n            display: 'flex',\r\n            alignItems: 'flex-end',\r\n            justifyContent: 'center',\r\n            color: 'white',\r\n            fontSize: '12px',\r\n            fontWeight: 'bold',\r\n            padding: '4px'\r\n          }}>\r\n            {item.value > 0 && item.value.toLocaleString('ru-RU')}\r\n          </div>\r\n          <div style={{ \r\n            fontSize: '12px', \r\n            color: '#666',\r\n            textAlign: 'center',\r\n            transform: 'rotate(-45deg)',\r\n            whiteSpace: 'nowrap'\r\n          }}>\r\n            {item.label}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TopProductsList = ({ products }) => (\r\n  <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n    {products.map((product, index) => (\r\n      <div key={product.id} style={{\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: '16px',\r\n        backgroundColor: '#f8f9fa',\r\n        borderRadius: '8px',\r\n        border: index === 0 ? '2px solid #ffd700' : '1px solid #e9ecef'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          <div style={{\r\n            width: '32px',\r\n            height: '32px',\r\n            borderRadius: '50%',\r\n            backgroundColor: index === 0 ? '#ffd700' : '#007bff',\r\n            color: 'white',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: '14px',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            {index === 0 ? <Award size={16} /> : index + 1}\r\n          </div>\r\n          <div>\r\n            <p style={{ fontWeight: '600', marginBottom: '4px' }}>{product.name}</p>\r\n            <p style={{ fontSize: '12px', color: '#666' }}>\r\n              Продано: {product.soldQuantity} шт. • Выручка: {(product.soldQuantity * product.price).toLocaleString('ru-RU')} ₽\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <p style={{ fontWeight: '600', color: '#28a745' }}>\r\n            {product.price.toLocaleString('ru-RU')} ₽\r\n          </p>\r\n          <p style={{ fontSize: '12px', color: product.stock > 10 ? '#28a745' : '#ffc107' }}>\r\n            Остаток: {product.stock}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nconst OrderStatusChart = ({ ordersByStatus }) => {\r\n  const statusColors = {\r\n    'Новый': '#007bff',\r\n    'В обработке': '#ffc107',\r\n    'Доставляется': '#17a2b8',\r\n    'Выполнен': '#28a745',\r\n    'Отменен': '#dc3545'\r\n  };\r\n\r\n  const total = Object.values(ordersByStatus).reduce((sum, count) => sum + count, 0);\r\n\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n      {Object.entries(ordersByStatus).map(([status, count]) => {\r\n        const percentage = total > 0 ? (count / total) * 100 : 0;\r\n        return (\r\n          <div key={status} style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n            <div style={{ minWidth: '100px', fontSize: '14px' }}>{status}</div>\r\n            <div style={{ \r\n              flex: 1, \r\n              height: '20px', \r\n              backgroundColor: '#e9ecef', \r\n              borderRadius: '10px',\r\n              overflow: 'hidden'\r\n            }}>\r\n              <div style={{\r\n                width: `${percentage}%`,\r\n                height: '100%',\r\n                backgroundColor: statusColors[status] || '#6c757d',\r\n                borderRadius: '10px',\r\n                transition: 'width 0.3s ease'\r\n              }} />\r\n            </div>\r\n            <div style={{ \r\n              minWidth: '60px', \r\n              textAlign: 'right',\r\n              fontSize: '14px',\r\n              fontWeight: '600'\r\n            }}>\r\n              {count} ({Math.round(percentage)}%)\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Analytics = () => {\r\n  const { analytics, orders, customers, products } = useData();\r\n  const [timeRange, setTimeRange] = useState('6months');\r\n\r\n  // Подготовка данных для графика выручки по месяцам\r\n  const getMonthlyRevenueData = () => {\r\n    const months = timeRange === '6months' ? 6 : 12;\r\n    const endDate = new Date();\r\n    const startDate = subMonths(endDate, months - 1);\r\n    \r\n    const monthsArray = eachMonthOfInterval({ start: startDate, end: endDate });\r\n    \r\n    return monthsArray.map(month => {\r\n      const monthKey = format(month, 'yyyy-MM');\r\n      const revenue = analytics.monthlyRevenue[monthKey] || 0;\r\n      return {\r\n        label: format(month, 'MMM yyyy', { locale: ru }),\r\n        value: revenue\r\n      };\r\n    });\r\n  };\r\n\r\n  // Расчет изменений за месяц (примерные данные)\r\n  const calculateMonthlyChange = (current, previous) => {\r\n    if (previous === 0) return current > 0 ? 100 : 0;\r\n    return Math.round(((current - previous) / previous) * 100);\r\n  };\r\n\r\n  const monthlyRevenueData = getMonthlyRevenueData();\r\n  const currentMonthRevenue = monthlyRevenueData[monthlyRevenueData.length - 1]?.value || 0;\r\n  const previousMonthRevenue = monthlyRevenueData[monthlyRevenueData.length - 2]?.value || 0;\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div style={{ marginBottom: '30px' }}>\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <div>\r\n            <h1 style={{ fontSize: '28px', fontWeight: 'bold', marginBottom: '8px' }}>\r\n              Аналитика и отчеты\r\n            </h1>\r\n            <p style={{ color: '#666' }}>\r\n              Детальная статистика работы магазина\r\n            </p>\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n            <Calendar size={18} />\r\n            <select\r\n              className=\"form-control\"\r\n              value={timeRange}\r\n              onChange={(e) => setTimeRange(e.target.value)}\r\n              style={{ width: 'auto' }}\r\n            >\r\n              <option value=\"6months\">Последние 6 месяцев</option>\r\n              <option value=\"12months\">Последние 12 месяцев</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Основные метрики */}\r\n      <div className=\"grid grid-2\" style={{ marginBottom: '30px' }}>\r\n        <div className=\"grid grid-2\">\r\n          <StatCard\r\n            title=\"Общая выручка\"\r\n            value={analytics.totalRevenue}\r\n            icon={DollarSign}\r\n            color=\"#28a745\"\r\n            change={calculateMonthlyChange(currentMonthRevenue, previousMonthRevenue)}\r\n          />\r\n          <StatCard\r\n            title=\"Всего заказов\"\r\n            value={analytics.totalOrders}\r\n            icon={ShoppingCart}\r\n            color=\"#007bff\"\r\n            change={8}\r\n          />\r\n          <StatCard\r\n            title=\"Активные клиенты\"\r\n            value={analytics.totalCustomers}\r\n            icon={Users}\r\n            color=\"#6f42c1\"\r\n            change={15}\r\n          />\r\n          <StatCard\r\n            title=\"Товары в каталоге\"\r\n            value={analytics.totalProducts}\r\n            icon={Package}\r\n            color=\"#fd7e14\"\r\n            change={-2}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Дополнительные метрики */}\r\n      <div className=\"grid grid-2\" style={{ marginBottom: '30px' }}>\r\n        <div className=\"grid grid-2\">\r\n          <StatCard\r\n            title=\"Средний чек\"\r\n            value={Math.round(analytics.averageOrderValue)}\r\n            icon={Target}\r\n            color=\"#17a2b8\"\r\n            change={5}\r\n          />\r\n          <StatCard\r\n            title=\"Конверсия\"\r\n            value={`${Math.round((analytics.totalOrders / analytics.totalCustomers) * 100)}%`}\r\n            icon={Activity}\r\n            color=\"#e83e8c\"\r\n            change={3}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Графики и детальная аналитика */}\r\n      <div className=\"grid grid-2\">\r\n        <div>\r\n          {/* График выручки */}\r\n          <ChartCard title=\"Выручка по месяцам\">\r\n            <SimpleBarChart \r\n              data={monthlyRevenueData} \r\n              color=\"#28a745\"\r\n            />\r\n          </ChartCard>\r\n\r\n          {/* Статус заказов */}\r\n          <ChartCard title=\"Распределение заказов по статусам\">\r\n            <OrderStatusChart ordersByStatus={analytics.ordersByStatus} />\r\n          </ChartCard>\r\n        </div>\r\n\r\n        <div>\r\n          {/* Топ товары */}\r\n          <ChartCard title=\"Топ-5 товаров по продажам\">\r\n            <TopProductsList products={analytics.topProducts} />\r\n          </ChartCard>\r\n\r\n          {/* Быстрая статистика */}\r\n          <div className=\"card\">\r\n            <h3 style={{ marginBottom: '20px' }}>Ключевые показатели</h3>\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }}>\r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between',\r\n                padding: '12px',\r\n                backgroundColor: '#f8f9fa',\r\n                borderRadius: '6px'\r\n              }}>\r\n                <span style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <DollarSign size={16} color=\"#28a745\" />\r\n                  Выручка за текущий месяц:\r\n                </span>\r\n                <strong style={{ color: '#28a745' }}>\r\n                  {currentMonthRevenue.toLocaleString('ru-RU')} ₽\r\n                </strong>\r\n              </div>\r\n              \r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between',\r\n                padding: '12px',\r\n                backgroundColor: '#f8f9fa',\r\n                borderRadius: '6px'\r\n              }}>\r\n                <span style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <ShoppingCart size={16} color=\"#007bff\" />\r\n                  Заказов в обработке:\r\n                </span>\r\n                <strong style={{ color: '#007bff' }}>\r\n                  {analytics.ordersByStatus['В обработке'] || 0}\r\n                </strong>\r\n              </div>\r\n              \r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between',\r\n                padding: '12px',\r\n                backgroundColor: '#f8f9fa',\r\n                borderRadius: '6px'\r\n              }}>\r\n                <span style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <Package size={16} color=\"#fd7e14\" />\r\n                  Товаров заканчивается:\r\n                </span>\r\n                <strong style={{ color: '#fd7e14' }}>\r\n                  {products.filter(p => p.stock <= 5).length}\r\n                </strong>\r\n              </div>\r\n              \r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between',\r\n                padding: '12px',\r\n                backgroundColor: '#f8f9fa',\r\n                borderRadius: '6px'\r\n              }}>\r\n                <span style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                  <Users size={16} color=\"#6f42c1\" />\r\n                  VIP клиентов:\r\n                </span>\r\n                <strong style={{ color: '#6f42c1' }}>\r\n                  {customers.filter(c => c.status === 'VIP').length}\r\n                </strong>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Analytics;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}